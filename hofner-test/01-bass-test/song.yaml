song:
  title: "Bass Test"
  composer: "Brian Edwards"
  tempo: 95
  time: "4/4"
  key: "G"

  structure:
    - main

sections:
  main:
    bars: 8
    instruments:
      bass:
        abc: |
          "G"G,4 G,2 B,2 | D4 D2 G,2 | "G"G,4 G,2 B,2 | D4 D2 G,2 |
          "C"C,4 C,2 E,2 | G,4 G,2 C,2 | "G"G,4 G,2 B,2 | D4 D2 G,2 |
        # M-Tron Pro IV: Brake effect (CC1) for tape flutter at phrase endings
        # Subtle pitch wobble (30) then release (0) - creates vintage tape feel
        automation:
          - cc: 1
            values: [[15, 30], [15.5, 20], [16, 0], [31, 30], [31.5, 20], [32, 0]]
      alto-sax:
        abc: |
          "G"B,4 D4 | G4 D2B,2 | "G"D4 B,4 | G4 D2B,2 |
          "C"E4 G4 | c4 G2E2 | "G"D4 B,4 | G4 D2B,2 |
        # MOJO 2: sustains with legato for smooth melodic lines
        articulation: sustains
        # Control notes placed just before affected notes for clean triggering and looping
        control_notes:
          - note: doits
            beat: 14.9
            velocity: 115  # >110 triggers release articulation
          - note: sustains
            beat: 15.9
            velocity: 100  # Reset for next phrase
          - note: falls
            beat: 30.9
            velocity: 115
          - note: sustains
            beat: 31.9
            velocity: 100  # Reset for loop
        automation:
          # CC1 (Dynamic Layers) - tightened range for natural brass dynamics
          - cc: 1
            values: [
              [0, 50],      # Start moderate
              [4, 60],      # Build into phrase
              [8, 70],      # Peak at bar 3
              [12, 58],     # Ease back
              [14, 50],     # Soft before doit
              [16, 52],     # New phrase start
              [20, 62],     # Build
              [24, 70],     # Peak at bar 7
              [28, 58],     # Ease back
              [30, 50],     # Soft before fall
              [31.9, 50]    # Reset for loop
            ]
          # CC23 (Vibrato Amount) - shimmer on sustained peaks
          - cc: 23
            values: [
              [0, 0],       # No vibrato at start
              [6, 50],      # Add vibrato approaching peak
              [8, 80],      # Full vibrato at phrase peak
              [12, 40],     # Ease off
              [14, 0],      # Clean for doit
              [16, 0],      # Reset
              [22, 55],     # Vibrato builds
              [24, 90],     # Strong vibrato at big peak
              [28, 45],     # Ease off
              [30, 0],      # Clean for fall
              [31.9, 0]     # Reset for loop
            ]
          # CC15 (Number of Players) - solo to section swell
          - cc: 15
            values: [
              [0, 30],      # Start with ~3 players
              [8, 60],      # Build to ~6 players at phrase peak
              [14, 35],     # Back down before doit
              [16, 30],     # Reset for phrase 2
              [24, 80],     # Full section at climax!
              [30, 40],     # Ease back before fall
              [31.9, 30]    # Reset for loop
            ]
      guitar:
        abc: |
          "G"D2G2B2d2 | D2G2B2d2 | "G"D2G2B2d2 | D2G2B2d2 |
          "C"E2G2c2e2 | E2G2c2e2 | "G"D2G2B2d2 | D2G2B2d2 |
        # Electric Sunburst: open articulation for clean arpeggios
        articulation: open
        control_notes:
          - note: open
            beat: 31.9
            velocity: 100  # Reset for loop
        automation:
          # CC3: Round robin reset at start for consistent playback
          - cc: 3
            values: [[0, 127]]
          # CC1: Subtle vibrato swell mid-phrase for expression
          - cc: 1
            values: [[8, 0], [12, 40], [16, 0], [24, 0], [28, 40], [32, 0]]

instruments:
  bass:
    program: 33
    plugin: m-tron-pro-iv
    # No keyswitch needed - articulation controlled via CC1 brake
  alto-sax:
    program: 66
    plugin: mojo-2
    articulation: sustains  # Default articulation
  guitar:
    program: 25
    plugin: electric-sunburst-deluxe
    articulation: open  # Default articulation (C1 = MIDI 24)
